(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69728904"],{"5d08":function(e,t,n){"use strict";var i=n("1f04"),a=n("97f5"),r=n("0914"),o=n("5156"),c=n("a187"),l=n("b7d9"),u=n("98a5"),s=n("3086"),d=n("7041"),f=d("slice"),p=s("species"),v=[].slice,_=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,i,s,d=l(this),f=c(d.length),m=o(e,f),g=o(void 0===t?f:t,f);if(r(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?a(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,m,g);for(i=new(void 0===n?Array:n)(_(g-m,0)),s=0;m<g;m++,s++)m in d&&u(i,s,d[m]);return i.length=s,i}})},"6a8c":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"9cda":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wp",staticClass:"wbs-tag-format"},[e.cnf.variableOnly?e._e():n("span",{staticClass:"el-dropdown-link",on:{click:function(t){return t.stopPropagation(),e.inset_item()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),e._v(" "),n("span",{staticClass:"label-inset-var"},[e._v("插入变量")])]),n("div",{staticClass:"input-box",class:{"is-focus":e.isFocus}},[e.cnf.variableOnly?n("div",[e._l(e.item_list,(function(t,i){return n("tag-variable-item",{key:i,ref:"tagItem",refInFor:!0,attrs:{opt:t,cnf:e.cnf},on:{del:function(t){return e.del_item(i,t)}}})})),n("span",{staticClass:"input-item-btn",on:{click:function(t){return t.stopPropagation(),e.inset_tag()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),e._v(" "),n("span",{staticClass:"label-inset-var"},[e._v("插入变量")])])],2):n("div",e._l(e.item_list,(function(t,i){return n("tag-item",{key:i,ref:"tagItem",refInFor:!0,class:{"last-item":i==e.items.length-1},attrs:{opt:t,cnf:e.cnf},on:{focus:function(t){return e.get_focus(i)},blur:e.blur_handler,change:function(t){return e.tag_change(i,t)},add:function(t){return e.inset_item(i)},del:function(t){return e.del_item(i,t)},"active-next":function(t){return e.active_next(i,t)}}})})),1),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.dropdown_active,expression:"dropdown_active"}],ref:"dropdownList",staticClass:"el-dropdown-menu el-popper"},e._l(e.cnf.dropdownItems,(function(t,i){return n("li",{key:i,staticClass:"el-dropdown-menu__item",on:{click:function(n){return e.select_dropdown_value(t,i)}}},[e._v(e._s(t))])})),0),e.cnf.variableOnly?e._e():n("div",{staticClass:"inner-mask",on:{click:e.focus_wp}})])])},a=[],r=(n("fc13"),n("9b5f"),n("62f9"),n("3bae"),n("ea94"),n("bf2f"),n("5b12"),n("5d08"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ib input-item",class:e.locked?"tag-ib":"",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.del_tag_ib(t)},input:e.tag_wp_input,click:function(t){return t.stopPropagation(),e.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:e.select}},[e._v(e._s(e.opt.name))]),e.locked?e._e():n("span",{staticClass:"between-tag-input",attrs:{contenteditable:"true"},domProps:{innerHTML:e._s(e.opt.value)},on:{blur:function(t){return e.input_action(t)},focus:function(t){return e.$emit("focus")},input:function(t){return e.div_input(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.div_keydown(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.div_enter(t)}}})])}),o=[],c={name:"comTagItem",props:{opt:""},data:function(){var e=this;return{tag_ib_html:"",value:e.opt.value,del_action:0}},created:function(){},mounted:function(){var e=this;e.tag_ib_html=e.$refs.displayValue.outerHTML},methods:{input_action:function(e){var t=this,n=e.target.innerText;t.opt.value=n,t.$emit("change",{name:n,value:n,type:0}),t.$emit("blur",n)},div_keydown:function(e){var t=this,n=t.value;""===n&&(t.del_action>0?(t.$emit("del",-1),t.del_action=0):(t.del_action++,t.$emit("change",{name:"",value:"",type:0})))},div_enter:function(e){return e.preventDefault(),!1},div_input:function(e){var t=this,n=e.target.innerText;if("%"==n)return t.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),t.value=e.target.innerText},tag_wp_input:function(e){var t=this;t.locked&&(e.target.innerHTML=t.tag_ib_html,t.$emit("active-next",e.data))},select:function(e){var t=window.getSelection(),n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e.currentTarget),t.addRange(n)},del_tag_ib:function(e){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},l=c,u=n("5d22"),s=Object(u["a"])(l,r,o,!1,null,null,null),d=s.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ib tag-item",class:e.locked?"tag-ib":"",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.del_tag_ib(t)},input:e.tag_wp_input,click:function(t){return t.stopPropagation(),e.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:e.select}},[e._v(e._s(e.opt.name))]),n("i",{staticClass:"del",on:{click:e.del_tag_ib}}),e.locked?e._e():n("span",{staticClass:"between-tag-readonly",domProps:{innerHTML:e._s(e.opt.value)},on:{blur:function(t){return e.input_action(t)},focus:function(t){return e.$emit("focus")},input:function(t){return e.div_input(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.div_keydown(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.div_enter(t)}}})])},p=[],v={name:"comTagItemVariableOnly",props:{opt:""},data:function(){var e=this;return{tag_ib_html:"",value:e.opt.value,del_action:0}},created:function(){},mounted:function(){var e=this;e.tag_ib_html=e.$refs.displayValue.outerHTML},methods:{input_action:function(e){var t=this,n=e.target.innerText;t.opt.value=n,t.$emit("change",{name:n,value:n,type:0}),t.$emit("blur",n)},div_keydown:function(e){var t=this,n=t.value;""===n&&(t.del_action>0?(t.$emit("del",-1),t.del_action=0):(t.del_action++,t.$emit("change",{name:"",value:"",type:0})))},div_enter:function(e){return e.preventDefault(),!1},div_input:function(e){var t=this,n=e.target.innerText;if("%"==n)return t.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),t.value=e.target.innerText},tag_wp_input:function(e){var t=this;t.locked&&(e.target.innerHTML=t.tag_ib_html,t.$emit("active-next",e.data))},select:function(e){var t=window.getSelection(),n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e.currentTarget),t.addRange(n)},del_tag_ib:function(e){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},_=v,m=Object(u["a"])(_,f,p,!1,null,null,null),g=m.exports,h={name:"WBTagFormat",props:{opt:String,cnf:{type:Object,value:{dropdownItems:{},variableOnly:!1}}},components:{"tag-item":d,"tag-variable-item":g},data:function(){var e,t=this;return e=t.cnf.variableOnly?t.opt.replace(/,/g,""):t.opt,{empty_item:{name:"",value:"",type:0},cur_value:e,cur_index:0,had_add:0,dropdown_active:0,isFocus:0,cnf_keys:Object.keys(t.cnf.dropdownItems),item_list:[]}},created:function(){},mounted:function(){var e=this;e.$nextTick((function(){e.cur_index=e.item_list.length-1})),document.addEventListener("click",(function(t){e.dropdown_active&&e.hide_dropdown()}))},methods:{tag_change:function(e,t){var n=this,i=n.items,a="";null!=t&&(i[e]=t.value,i.forEach((function(e,t,n){var i=e.trim();i&&(a+=i)})),n.cur_value=a)},inset_item:function(e){var t=this,n=null!=e?e:t.cur_index;""!==t.item_list[n].value&&(n+=1,t.items.splice(n,0,"%"),t.item_list.splice(n,0,t.empty_item),t.cur_index=n),t.item_list[n].value="%",t.active_dropdown(n)},inset_tag:function(e){var t=this,n=null!=e?e:t.cur_index;t.item_list[n].value="",t.active_dropdown(n)},del_item:function(e,t){var n=this,i="",a=n.items,r=e+t;r=r>=0?r:0,n.item_list[r].type&&(a.forEach((function(e,t){r!==t&&(i+=e)})),n.cur_value=i,n.cur_index=r-1,n.set_focus(r))},active_dropdown:function(e){var t=this,n=null!==e?e:t.cur_index,i=t.$refs.tagItem.length-1,a=n>i?i:n,r=t.$refs.tagItem[a].$el.offsetLeft;t.dropdown_active=!0,t.$refs.dropdownList.style.left=r+"px",t.$refs.wp.classList.add("active-dropdown")},hide_dropdown:function(){var e=this;e.dropdown_active=!1,e.$refs.dropdownList.style.left="",e.$refs.wp.classList.remove("active-dropdown")},select_dropdown_value:function(e,t){var n=this,i="",a=n.items,r=n.cur_index;a[r]=t,a.forEach((function(e,t){i+=e})),n.cur_value=i,n.hide_dropdown(),n.$nextTick((function(){var e=n.items.length;n.cur_index=e-1,n.set_focus(e)}))},active_next:function(e,t){var n=this,i=e+1,a=n.$refs.tagItem[i].$el.querySelector(".between-tag-input"),r=a.innerText;a.innerText=t+r,a.focus();var o=window.getSelection();o.removeAllRanges();var c=document.createRange();c.setStart(a,1),o.addRange(c)},set_focus:function(e){var t=this,n=e>1?e-1:0,i=t.$refs.tagItem[n].$el,a=i.querySelector(".between-tag-input"),r=window.getSelection(),o=document.createRange();if(a){var c=a.innerText.length,l=c?a.firstChild:a;r.removeAllRanges(),o.setStart(l,c),o.setEnd(l,c)}else{var u=i.querySelector(".display-value");r.removeAllRanges(),u&&o.selectNode(u)}return r.addRange(o),!1},get_focus:function(e){this.cur_index=e,this.isFocus=!0},focus_wp:function(){var e=this,t=e.$refs.tagItem.length;e.cur_index=t-1,e.set_focus(t),e.isFocus=!0},blur_handler:function(e){var t=this;t.isFocus=!1}},computed:{items:function(){var e=this,t=e.cur_value;return t?(e.cnf.variableOnly&&(t=t.replace(/,/g,"")),t=t.replace(/(%\w+%)/g,"##$1##"),t=t.replace(/^##/g,""),t.split("##")):[]}},watch:{cur_value:{handler:function(e){var t=this,n=t.cnf.variableOnly?e.replace(/,/g,""):e,i=n;i=i.replace(/(%\w+%)/g,"##$1##"),i=i.replace(/^##/g,"");var a=[{name:"",value:"",type:0}],r=n?i.split("##"):[];r.forEach((function(e,n){var i=t.cnf_keys.indexOf(e)>-1?1:0;a[n]={name:i?t.cnf.dropdownItems[e]:e,value:e,type:i}})),a.slice(-1)[0].type&&a.push(t.empty_item),t.item_list=a,t.$emit("change",n)},immediate:!0},opt:{handler:function(e){var t=this;t.cur_value=e}}}},y=h,w=Object(u["a"])(y,i,a,!1,null,null,null);t["a"]=w.exports},bf2f:function(e,t,n){"use strict";var i=n("1f04"),a=n("5156"),r=n("e6d2"),o=n("a187"),c=n("f8d3"),l=n("6827"),u=n("98a5"),s=n("7041"),d=s("splice"),f=Math.max,p=Math.min,v=9007199254740991,_="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,i,s,d,m,g,h=c(this),y=o(h.length),w=a(e,y),k=arguments.length;if(0===k?n=i=0:1===k?(n=0,i=y-w):(n=k-2,i=p(f(r(t),0),y-w)),y+n-i>v)throw TypeError(_);for(s=l(h,i),d=0;d<i;d++)m=w+d,m in h&&u(s,d,h[m]);if(s.length=i,n<i){for(d=w;d<y-i;d++)m=d+i,g=d+n,m in h?h[g]=h[m]:delete h[g];for(d=y;d>y-i+n;d--)delete h[d-1]}else if(n>i)for(d=y-i;d>w;d--)m=d+i-1,g=d+n-1,m in h?h[g]=h[m]:delete h[g];for(d=0;d<n;d++)h[d+w]=arguments[d+2];return h.length=y-i+n,s}})},ea94:function(e,t,n){"use strict";var i=n("1f04"),a=n("f8d5").trim,r=n("ed58");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},ed58:function(e,t,n){var i=n("7ce6"),a=n("6a8c"),r="​᠎";e.exports=function(e){return i((function(){return!!a[e]()||r[e]()!=r||a[e].name!==e}))}},f8d5:function(e,t,n){var i=n("4023"),a=n("6a8c"),r="["+a+"]",o=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),l=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}}}]);